"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[1903],{3905:function(e,o,r){r.d(o,{Zo:function(){return p},kt:function(){return u}});var n=r(7294);function t(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function i(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?i(Object(r),!0).forEach((function(o){t(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}function a(e,o){if(null==e)return{};var r,n,t=function(e,o){if(null==e)return{};var r,n,t={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],o.indexOf(r)>=0||(t[r]=e[r]);return t}(e,o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],o.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var l=n.createContext({}),s=function(e){var o=n.useContext(l),r=o;return e&&(r="function"==typeof e?e(o):c(c({},o),e)),r},p=function(e){var o=s(e.components);return n.createElement(l.Provider,{value:o},e.children)},d={inlineCode:"code",wrapper:function(e){var o=e.children;return n.createElement(n.Fragment,{},o)}},m=n.forwardRef((function(e,o){var r=e.components,t=e.mdxType,i=e.originalType,l=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),m=s(r),u=t,k=m["".concat(l,".").concat(u)]||m[u]||d[u]||i;return r?n.createElement(k,c(c({ref:o},p),{},{components:r})):n.createElement(k,c({ref:o},p))}));function u(e,o){var r=arguments,t=o&&o.mdxType;if("string"==typeof e||t){var i=r.length,c=new Array(i);c[0]=m;var a={};for(var l in o)hasOwnProperty.call(o,l)&&(a[l]=o[l]);a.originalType=e,a.mdxType="string"==typeof e?e:t,c[1]=a;for(var s=2;s<i;s++)c[s]=r[s];return n.createElement.apply(null,c)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},3867:function(e,o,r){r.r(o),r.d(o,{frontMatter:function(){return a},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var n=r(7462),t=r(3366),i=(r(7294),r(3905)),c=["components"],a={},l="Discussion on Docker File and Docker Compose File",s={unversionedId:"Docker/Docker-File-DockerCompose",id:"Docker/Docker-File-DockerCompose",title:"Discussion on Docker File and Docker Compose File",description:"Discussion on Docker File and Docker Compose File",source:"@site/docs/Docker/Docker-File-DockerCompose.md",sourceDirName:"Docker",slug:"/Docker/Docker-File-DockerCompose",permalink:"/techblog/docs/Docker/Docker-File-DockerCompose",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Docker/Docker-File-DockerCompose.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Docker Architecture",permalink:"/techblog/docs/Docker/Docker-Architecture"},next:{title:"How to change default Docker image installation path / Direcotory on Windows 10",permalink:"/techblog/docs/Docker/Docker-How-To-Change-Image-Installation-Path"}},p=[{value:"Discussion on Docker File and Docker Compose File",id:"discussion-on-docker-file-and-docker-compose-file-1",children:[],level:6},{value:"Docker File",id:"docker-file",children:[],level:6},{value:"Sample docker-compose.yml file for .net core WebApi project",id:"sample-docker-composeyml-file-for-net-core-webapi-project",children:[],level:6},{value:"Sample docker-compose.override.yml file for .net core webapi project",id:"sample-docker-composeoverrideyml-file-for-net-core-webapi-project",children:[],level:6},{value:"To run and stop Docker compose file",id:"to-run-and-stop-docker-compose-file",children:[],level:6},{value:"To Build or rebuild services",id:"to-build-or-rebuild-services",children:[],level:6}],d={toc:p};function m(e){var o=e.components,r=(0,t.Z)(e,c);return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:o,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"discussion-on-docker-file-and-docker-compose-file"},"Discussion on Docker File and Docker Compose File"),(0,i.kt)("h6",{id:"discussion-on-docker-file-and-docker-compose-file-1"},"Discussion on Docker File and Docker Compose File"),(0,i.kt)("h6",{id:"docker-file"},"Docker File"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"It basically a configuration file. Which contains information about\n",(0,i.kt)("em",{parentName:"li"},"Dependences, What to do? How to do etc.,"),". We can say Docker file helps to dockerize a given application"),(0,i.kt)("li",{parentName:"ul"},"Mostly It contains 2 parts",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Building the application"),(0,i.kt)("li",{parentName:"ul"},"Run the application")))),(0,i.kt)("p",null,"To Orchestrate we need a docker-compose file\n\xa0 - docker-compose.yml\n\xa0 - docker-compose.override.yml\n\xa0 \xa0 ",(0,i.kt)("em",{parentName:"p"},"It can contain configuration overrides for existing services or entirely new services. The use case for multiple files is based on the environment we can have multiple override files")),(0,i.kt)("h6",{id:"sample-docker-composeyml-file-for-net-core-webapi-project"},"Sample docker-compose.yml file for .net core WebApi project"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"version: '3.4'\n\nservices:\n  bloggerDocDB:\n      image: mongo\n\n  bloggerservice:\n      image: ${DOCKER_REGISTRY-}bloggerservice\n      build:\n        context: .\n        dockerfile: BloggerService/Dockerfile\nvolumes: # it specifies the storage outside of the container. In our case,\xa0if the container restarts then mongo DB data or other data will get lost.\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 #if it needs to be persisted we can use volumes. This data will get stored in the hosting machine. Even if the image has removed and recreated this data will be available in the host machine\n  mongo_data:\n")),(0,i.kt)("h6",{id:"sample-docker-composeoverrideyml-file-for-net-core-webapi-project"},"Sample docker-compose.override.yml file for .net core webapi project"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},'version: \'3.4\'\nservices:\n   bloggerdb:\n       container_name: bloggerdb\n       restart: always\n       #Always restarts the applicatoin in case of ERROR\n           volumes:\n               - ${WEBAPP_STORAGE_HOME}/SITE:/data/db\n               # Store the data which is generated by container. It is a permenant storage\n           ports:\n              -"27017:27017"\n\n   bloggerservice:\n       environment:\n         - ASPNETCORE_ENVIRONMENT=Development\n         -"DBSettings:ConnectionString=mongodb://bloggerdb:27017"\n         # Note here *bloggerdb* is actually a container name\n         # Within docker env. we have to use container name and *Actual* port\n       depends_on:\n          - bloggerdb\n          # This means the second container WILL NOT wait till the first container started completely. it just says the order\n        volumes:\n           - ${HOME}/.microsoft/usersecrets/:/root/.microsoft/usersecrets\n           - ${HOME}/.aspnet/https:/root/.aspnet/https/\n       ports:\n         - "5000:80"\n\n\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("em",{parentName:"p"},"Note - Docker environment-specific,  settings can be overridden under ",(0,i.kt)("strong",{parentName:"em"},"Environment Section")),"Example - In a Normal environment (Without a container), we may connect to other services with local ports. But within the Docker environment, the ports can be different*")),(0,i.kt)("h6",{id:"to-run-and-stop-docker-compose-file"},"To run and stop Docker compose file"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-powershell"},"docker-compose -f docker-compose.yml  -f docker-compose.override.yml up -d\n# -d to run in background\n# Here based on env we can pass the override filename\n\ndocker-compose -f docker-compose.yml  -f docker-compose.override.yml down -d\n")),(0,i.kt)("h6",{id:"to-build-or-rebuild-services"},"To Build or rebuild services"),(0,i.kt)("p",null,"If you change Code/Configurations etc then run below command to rebuild.\nBut docker file updates we no need to call build command."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-powershell"},"docker-compose -f docker-compose.yml  -f docker-compose.override.yml up --build\n")))}m.isMDXComponent=!0}}]);